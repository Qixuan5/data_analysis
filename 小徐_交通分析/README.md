
# 小徐_交通分析

## 📌 项目简介

本项目聚焦北京、上海、广州、深圳四个一线城市的轨道交通系统与交通拥堵情况，基于高德地图地铁数据与拥堵评价指数，对城市通勤便利性、轨交密度、区级覆盖度与交通效率进行定量比较。结合空间可视化与文本处理，挖掘城市交通结构差异，为城市规划与通勤效率研究提供支持。



## 📁 文件结构

```

小徐\_交通分析/
├── data/                            # 地铁数据与拥堵指数数据
├── crawl\_subway\_gdmap.py           # 高德地铁线路 + 站点数据爬虫
├── parse\_subway\_json.py            # 高德JS数据解析
├── traffic\_score.csv               # 城市交通维度评分表
├── subway\_lines\_plot.py            # 绘制地铁线路图
├── subway\_wordcloud.py             # 站点词云分析
├── traffic\_eval.md                 # 拥堵指标构建方法说明
└── README.md                       # 当前说明文档

````


## 🌐 数据来源与处理

### 🚇 地铁数据
- 来源：高德地图地铁图 `http://map.amap.com/subway/index.html`
- 数据类型：HTML + JavaScript（嵌入式 JSON）
- 城市：北京 / 上海 / 广州 / 深圳
- 字段包括：
  - 地铁线路编号、名称、颜色
  - 每条线路的站点顺序、坐标、换乘标志
- 技术方法：
  - 使用正则表达式提取 `<script>` 内嵌 JSON
  - 标准化线路-站点映射，清除未开通站点

### 🚗 拥堵数据
- 指标类型：
  - 地铁线路数量
  - 地铁站点总数
  - 地铁日均客运量（来自公开年报）
  - 高峰期平均速度（km/h）
  - 高峰拥堵延时指数（AMAP & 城市年鉴）
- 打分标准：
  - 每个维度标准化为 [0,1] 分数
  - 综合得分为平均权重求和



## 📊 可视化分析

### 1. 地铁网络可视化
- 使用 `pyecharts.Line` 绘制各城市轨交线路
- 区分颜色、标注站点与换乘点
- 输出交互式 HTML 文件（含浮窗）

### 2. 地铁站点词云
- 提取所有站点名称，使用结巴分词与 `WordCloud`
- 展示站点命名热词（如“中心”、“南路”、“东站”等）
- 结合通勤集散地识别

### 3. 交通得分条形图
- 对四城进行五项交通指标打分
- 可视化柱状图 & 雷达图对比各城市交通综合表现


## 🏙 样例结论摘要

| 城市 | 地铁线数量 | 高峰期速度 | 拥堵指数 | 地铁客运量（亿） | 综合交通得分 |
|------|------------|-------------|-----------|------------------|----------------|
| 北京 | 27         | 27.2 km/h   | 2.34      | 46.1             | 0.88           |
| 上海 | 20         | 28.9 km/h   | 2.15      | 58.8             | 0.91           |
| 广州 | 14         | 30.3 km/h   | 1.93      | 28.9             | 0.82           |
| 深圳 | 11         | 31.1 km/h   | 2.09      | 18.7             | 0.76           |


## ⚙ 使用方法

### 安装依赖

```bash
pip install pandas pyecharts wordcloud jieba requests beautifulsoup4
````

### 示例运行

```bash
# 1. 爬取并解析高德地铁数据
python crawl_subway_gdmap.py

# 2. 提取 JS 中的地铁 JSON 数据
python parse_subway_json.py

# 3. 生成地铁线路图 & 词云图
python subway_lines_plot.py
python subway_wordcloud.py
```


## 📘 License

本项目遵循 MIT 协议，地铁数据来自高德地图，版权归原始提供者所有，分析仅供研究用途。

