
# 小徐_房价分析

## 📌 项目概览

本项目旨在基于链家网公开的二手房挂牌数据，爬取并分析北京、上海、广州、深圳四个一线城市的房价结构与居住特征。通过数据爬虫获取明细房源信息，并结合地理编码、清洗与多维可视化，构建一个可量化、可扩展的城市住房分析框架，服务于城市规划、地产研究与公共政策评估。

## 📁 文件结构

```
小徐_房价分析/
├── data_clear/ # 数据清洗相关脚本与地理信息表格
│   ├── data_clear.ipynb
│   ├── geography_get.ipynb
│   ├── 北京_geo.xls
│   ├── 广州_geo.xls
│   ├── 上海_geo.xls
│   └── 深圳_geo.xls
│
├── get_data/ # 数据爬取脚本与原始数据存储
│   ├── get_data_yqx.py
│   └── data/
│
├── 可视化/ # 各城市可视化成果展示
│   ├── R语言可视化/
│   ├── 北京可视化/
│   ├── 广州可视化/
│   ├── 上海可视化/
│   └── 深圳可视化/
│
└── 小徐_房价分析.pdf # 项目说明报告
```

## 🌐 数据来源与采集方法

- 数据网站：链家二手房 `https://{city}.lianjia.com/ershoufang/`
- 覆盖城市：北京、上海、广州、深圳
- 采集页数：每城市 100 页（约 3000 套房源）
- 字段数：列表页字段 + 详情页字段 + 标签信息，共计 43 项

## 🔧 技术栈与工具

| 模块           | 用途说明                            |
|----------------|-------------------------------------|
| requests       | 网页内容请求                        |
| BeautifulSoup  | HTML 结构解析                       |
| re             | 正则表达式提取字段                  |
| pandas         | 数据结构与数据清洗                  |
| folium         | 地理热力图                          |
| seaborn        | 统计分布图表                        |
| plotly/pyecharts | 高交互可视化                       |
| wordcloud      | 小区词云可视化                      |

## 🧼 数据清洗流程

- 字段重命名与单位剥离
- 正则拆分字段（如楼层、朝向、电梯信息等）
- 缺失值填补与逻辑推导（如梯户比缺失 → 电梯判断）
- 调用高德地图 API 获取经纬度信息（限流处理）
- 输出整合数据表供可视化调用

## 📊 可视化分析内容

### 1. 连续变量分析
- 总价/单价/面积分布：箱型图、KDE图、热力图
- 总价-面积-单价三维关系：散点图 + LOWESS 拟合
- 聚类划分：KMeans 聚类，展示不同购房群体

### 2. 区域结构分析
- 各行政区房价水平分布：条形图 + 地图（GeoJSON）
- 热力图/分级着色图：展示城市房价空间梯度

### 3. 分类特征分析
- 户型/装修/楼层等字段的频数与占比
- 挂牌时间分布（时间序列图）
- 小区名称词云：识别高频楼盘与热门区域

### 4. 多变量建模分析
- OLS 回归：建模各变量对房价的影响
- 平行坐标图：多维特征轨迹识别差异
- 三维图：面积 × 单价 × 梯户比对总价的影响

### 5. 交互式图表
- folium：HTML 热力图输出
- plotly：Hover 可交互散点图
- pyecharts：带有拖拽功能的房价地图

## ✅ 启动方式（以深圳为例）

```bash
# 1. 爬取深圳房源数据
python get_data_yqx.py

# 2. 清洗字段 & 地理坐标转换
jupyter notebook data_clear/data_clear.ipynb

# 3. 生成分析图表
# 可视化脚本见 可视化/深圳可视化 目录
```

## 📘 协议与说明

- 本项目遵循 MIT 协议，欢迎 fork、引用与教学用途传播。
- 所采集数据仅限课程分析与非商业学术使用，禁止用于商业化开发与传播。
